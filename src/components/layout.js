import React, { useState } from 'react'
import PropTypes from 'prop-types'
import { TransitionGroup, Transition } from 'react-transition-group'
import { StaticQuery, graphql, Link } from 'gatsby'
import './layout.css'

const styles = {
  tab: {
    padding: 12,
    display: 'grid',
    background: '#3E3D4D',
    color: '#fff',
    textDecoration: 'none',
  },
  activeTab: {
    background: '#816D66',
  },
}

const transitionStyles = {
  entering: { opacity: 0 },
  entered: { opacity: 1 },
}

const Layout = ({ children }) => {
  const [currentPage, setCurrentPage] = useState('home')

  return (
    <StaticQuery
      query={graphql`
        query SiteTitleQuery {
          site {
            siteMetadata {
              title
            }
          }
        }
      `}
      render={data => (
        <>
          <TransitionGroup>
            <Transition key={currentPage} timeout={150}>
              {state => (
                <div
                  style={{
                    transition: 'opacity 150ms ease-in-out',
                    opacity: 0,
                    ...transitionStyles[state],
                  }}
                >
                  {children}
                </div>
              )}
            </Transition>
          </TransitionGroup>
          <div
            style={{
              width: '100%',
              height: 80,
              position: 'fixed',
              bottom: 0,
              display: 'grid',
              gridTemplateColumns: '1fr 1fr 1fr',
              alignContent: 'center',
              textAlign: 'center',
              fontSize: '1.25rem',
            }}
          >
            <div>
              <Link
                to="/"
                style={styles.tab}
                activeStyle={styles.activeTab}
                onClick={() => setCurrentPage('home')}
              >
                <div style={{ height: 36 }}>
                  <svg
                    x="0px"
                    y="0px"
                    viewBox="0 0 306.773 306.773"
                    width="24px"
                    height="30px"
                  >
                    <path
                      d="M302.93,149.794c5.561-6.116,5.024-15.49-1.199-20.932L164.63,8.898   c-6.223-5.442-16.2-5.328-22.292,0.257L4.771,135.258c-6.092,5.585-6.391,14.947-0.662,20.902l3.449,3.592   c5.722,5.955,14.971,6.665,20.645,1.581l10.281-9.207v134.792c0,8.27,6.701,14.965,14.965,14.965h53.624   c8.264,0,14.965-6.695,14.965-14.965v-94.3h68.398v94.3c-0.119,8.264,5.794,14.959,14.058,14.959h56.828   c8.264,0,14.965-6.695,14.965-14.965V154.024c0,0,2.84,2.488,6.343,5.567c3.497,3.073,10.842,0.609,16.403-5.513L302.93,149.794z"
                      fill="#FFFFFF"
                    />
                  </svg>
                </div>
                home
              </Link>
            </div>
            <div>
              <Link
                to="/wedding"
                style={styles.tab}
                activeStyle={styles.activeTab}
                onClick={() => setCurrentPage('wedding')}
              >
                <div style={{ height: 36 }}>
                  <svg
                    x="0px"
                    y="0px"
                    viewBox="0 0 512 512"
                    width="30px"
                    height="30px"
                  >
                    <path
                      d="M405.966,202.324l33.761-42.968c3.6-4.582,5.022-10.505,3.896-16.221
                	s-4.688-10.658-9.757-13.532l-29.975-17c-3.009-1.706-6.408-2.603-9.867-2.603h-53.923c-3.545,0-7.027,0.942-10.088,2.73l-29.102,17
                	c-4.992,2.917-8.479,7.851-9.56,13.53s0.349,11.549,3.921,16.096l33.585,42.744c-14.497,3.957-28.097,10.106-40.416,18.078
                	C257.804,190.383,216.012,172,170,172C76.262,172,0,248.262,0,342s76.262,170,170,170c21.51,0,42.483-3.97,62.337-11.799
                	c10.275-4.052,15.321-15.667,11.269-25.942c-4.053-10.276-15.666-15.32-25.943-11.269C202.502,468.969,186.465,472,170,472
                	c-71.682,0-130-58.318-130-130s58.318-130,130-130c33.933,0,64.865,13.074,88.04,34.442C235.617,271.978,222,305.426,222,342
                	c0,79.953,65.047,145,145,145c17.136,0,33.918-2.965,49.88-8.813c10.372-3.8,15.699-15.288,11.899-25.66
                	s-15.287-15.697-25.66-11.899C391.579,444.856,379.427,447,367,447c-57.897,0-105-47.103-105-105
                	c0-23.832,7.986-45.83,21.415-63.472C293.969,297.312,300,318.964,300,342c0,4.053-0.188,8.144-0.56,12.158
                	c-1.017,10.999,7.075,20.74,18.073,21.757c11.002,1.022,20.74-7.074,21.757-18.073c0.484-5.235,0.73-10.565,0.73-15.842
                	c0-33.245-9.601-64.286-26.163-90.512C329.44,242.288,347.613,237,367,237c57.897,0,105,47.103,105,105
                	c0,13.353-2.466,26.352-7.331,38.637c-4.066,10.27,0.962,21.892,11.232,25.958c10.272,4.068,21.892-0.962,25.958-11.232
                	C508.588,378.371,512,360.417,512,342C512,275.541,467.055,219.389,405.966,202.324z M345.516,150h43.232l5.16,2.927l-26.408,33.61
                	l-26.593-33.845L345.516,150z M246.747,69.142c-7.811-7.811-7.811-20.474,0-28.284s20.474-7.811,28.284,0l26,26
                	c7.811,7.811,7.811,20.474,0,28.284c-3.905,3.905-9.023,5.858-14.142,5.858s-10.237-1.953-14.142-5.858L246.747,69.142z
                	 M432.858,95.142c-7.811-7.811-7.811-20.474,0-28.284l26-26c7.811-7.811,20.474-7.811,28.284,0s7.811,20.474,0,28.284l-26,26
                	C457.237,99.047,452.119,101,447,101S436.763,99.047,432.858,95.142z M347,58V20c0-11.046,8.954-20,20-20s20,8.954,20,20v38
                	c0,11.046-8.954,20-20,20S347,69.046,347,58z"
                      fill="#fff"
                    />
                  </svg>
                </div>
                wedding
              </Link>
            </div>
            <div>
              <Link
                to="/info"
                style={styles.tab}
                activeStyle={styles.activeTab}
                onClick={() => setCurrentPage('info')}
              >
                <div style={{ height: 36 }}>
                  <svg
                    x="0px"
                    y="0px"
                    viewBox="0 0 480 480"
                    width="34px"
                    height="34px"
                    style={{ marginLeft: 6 }}
                  >
                    <path
                      d="M160,0C93.726,0,40,53.726,40,120v88c0.035,30.913,25.087,55.965,56,56h8v-16h-8c-22.08-0.026-39.974-17.92-40-40v-88c0-57.438,46.562-104,104-104s104,46.562,104,104v88c-0.026,22.08-17.92,39.974-40,40h-8v16h8c30.913-0.035,55.965-25.087,56-56v-88C280,53.726,226.274,0,160,0z"
                      fill="#FFFFFF"
                    />
                    <path
                      d="M65.928,377.032l5.848-9.208l-13.512-8.576l-5.848,9.216c-17.687,27.872-16.374,63.76,3.304,90.264V480h16v-24c0.001-1.817-0.617-3.581-1.752-5C52.96,429.738,51.337,400.02,65.928,377.032z"
                      fill="#FFFFFF"
                    />
                    <path
                      d="M440,0H336c-22.08,0.026-39.974,17.92-40,40v80c0.026,22.08,17.92,39.974,40,40h16v32c-0.001,3.235,1.947,6.153,4.936,7.392c0.971,0.405,2.012,0.611,3.064,0.608c2.122,0,4.156-0.844,5.656-2.344L403.312,160H440c22.08-0.026,39.974-17.92,40-40V40C479.974,17.92,462.08,0.026,440,0z M464,120c0,13.255-10.745,24-24,24h-40c-2.122,0-4.156,0.844-5.656,2.344L368,172.688V152c0-4.418-3.582-8-8-8h-24c-13.255,0-24-10.745-24-24V40c0-13.255,10.745-24,24-24h104c13.255,0,24,10.745,24,24V120z"
                      fill="#FFFFFF"
                    />
                    <rect
                      x="336"
                      y="40"
                      width="56"
                      height="16"
                      fill="#FFFFFF"
                    />
                    <rect
                      x="408"
                      y="40"
                      width="32"
                      height="16"
                      fill="#FFFFFF"
                    />
                    <rect
                      x="336"
                      y="72"
                      width="104"
                      height="16"
                      fill="#FFFFFF"
                    />
                    <rect
                      x="336"
                      y="104"
                      width="56"
                      height="16"
                      fill="#FFFFFF"
                    />
                    <path
                      d="M267.584,368.464l-5.848-9.216l-13.512,8.576l5.848,9.216c14.592,22.985,12.969,52.701-4.04,73.96    c-1.135,1.419-1.753,3.183-1.752,5v24h16v-21.272C283.958,432.224,285.271,396.336,267.584,368.464z"
                      fill="#FFFFFF"
                    />
                    <path
                      d="M472,272h-72c-30.016,0.035-54.666,23.729-55.888,53.72L320,369.128V336c-0.035-30.913-25.087-55.965-56-56h-29.24    l-0.216-0.168L234.4,280H216c-8.837,0-16-7.163-16-16v-18.824c24.719-14.272,39.962-40.633,40-69.176v-64    c-0.012-13.255-3.31-26.3-9.6-37.968c-2.015-3.712-6.569-5.219-10.4-3.44L84.592,134.304c-2.804,1.32-4.593,4.141-4.592,7.24V176    c0.038,28.543,15.281,54.904,40,69.176V264c0,8.837-7.163,16-16,16H56c-30.913,0.035-55.965,25.087-56,56v144h16V336    c0.026-22.08,17.92-39.974,40-40h25.456l72.04,100.656c1.48,2.069,3.856,3.31,6.4,3.344H160c2.518,0,4.889-1.186,6.4-3.2l76-100.8    H264c22.08,0.026,39.974,17.92,40,40v64c0.004,4.418,3.589,7.997,8.007,7.993c2.902-0.003,5.575-1.576,6.985-4.113L356.704,336    h45.864l-78,144h18.2L420.8,336h3.2c30.913-0.035,55.965-25.087,56-56C480,275.582,476.418,272,472,272z M96,176v-29.376    l123.528-58.128C222.483,95.98,224,103.954,224,112v64c0,35.346-28.654,64-64,64C124.654,240,96,211.346,96,176z M160.168,378.496    L135.48,344h50.688L160.168,378.496z M198.272,328H124l-22.904-32H104c17.673,0,32-14.327,32-32v-11.688    c15.622,4.917,32.378,4.917,48,0V264c0,17.673,14.327,32,32,32h6.4L198.272,328z M424,320h-63.2    c3.825-18.613,20.198-31.979,39.2-32h63.2C459.375,306.613,443.002,319.979,424,320z"
                      fill="#FFFFFF"
                    />
                  </svg>
                </div>
                info
              </Link>
            </div>
          </div>
        </>
      )}
    />
  )
}

Layout.propTypes = {
  children: PropTypes.node.isRequired,
}

export default Layout
